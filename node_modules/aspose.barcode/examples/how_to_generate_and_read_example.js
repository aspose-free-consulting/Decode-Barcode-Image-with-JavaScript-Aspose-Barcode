const barcode = require("aspose.barcode");
const test_assist = require('./tests_assist');
const fs = require("fs");
let BarcodeGenerator = barcode.AsposeBarcode.Generator.BarcodeGenerator;
let BarcodeReader = barcode.AsposeBarcode.Reader.BarcodeReader;
let EncodeTypes = barcode.AsposeBarcode.Generator.EncodeTypes;

function generate_and_read()
{
    test_assist.set_license();
    let generator = new BarcodeGenerator(EncodeTypes.CODE_128, "12367891011");
    let file_path = "./resources/generating/setBarcodeType.png";
    generator.save(file_path, "PNG");

    let image_data_base64 = fs.readFileSync(file_path).toString('base64');
    let reader = new BarcodeReader(image_data_base64, null, DecodeType.ALL_SUPPORTED_TYPES);
    reader.readBarCodes().forEach(function(result, i, results)
    {
        console.log("Recognized barcode code text: " + result.getCodeText());
        console.log("\n");
        console.log("Recognized barcode code type: " + result.getCodeTypeName());
    });
}

generate_and_read();